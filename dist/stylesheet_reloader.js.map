{"version":3,"sources":["stylesheet_reloader.coffee","stylesheet_reloader.js"],"names":["hasProp","hasOwnProperty","window","StyleSheetReloader","options","defaultOptions","hotKeyPressed","optionDefaultValue","optionKey","runChange","cssUrl","hotKey","call","addParameter","href","hrefLastChar","i","len","link","links","replacedLinks","replacedVersion","document","querySelectorAll","length","getAttribute","indexOf","split","substr","Date","now","setAttribute","event","key","result","trim","toLowerCase","keyCode","toUpperCase","charCodeAt","onkeydown","e","this"],"mappings":"CAAA,WAAA,GAAAA,MAAAC,cAIAC,QAAOC,mBAAqB,SAACC,GAC5B,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,CAAAJ,IACCK,QAAQ,EACPC,OAAQ,SAEW,gBAAXP,KACTA,GACCM,OAAON,IAEY,gBAAXA,KACTA,KACD,KAAAI,IAAAH,GCSUL,EAAQY,KAAKP,EAAgBG,KAClCD,EAAqBF,EAAeG,GDTpCJ,EAAQI,KACXJ,EAAQI,GAAaH,EAAeG,IC2DnC,ODzDHC,GAAY,SAACC,GACZ,GAAAG,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAEA,KAFAD,EAAgB,EAChBD,EAAQG,SAASC,iBAAiB,8BAClCP,EAAA,EAAAC,EAAAE,EAAAK,OAAAP,EAAAD,EAAAA,ICaME,EAAOC,EAAMH,GDZlBF,EAAOI,EAAKO,aAAa,SACtBX,IAAQA,EAAKU,QAAYd,GAAgC,KAAtBI,EAAKY,QAAQhB,KAClDI,EAAOA,EAAKa,MAAM,mBAAmB,GACrCZ,EAAeD,EAAKc,OAAOd,EAAKU,OAAO,IACtB,MAAdT,GAAmC,MAAdA,KACvBD,EAAOA,EAAKc,OAAO,EAAEd,EAAKU,OAAO,IAClCH,EAAkBQ,KAAKC,MACvBjB,EAAe,IACO,KAAnBC,EAAKY,QAAQ,OACfb,EAAe,KAChBC,GAAOD,EAAe,mBAAqBQ,EAC3CH,EAAKa,aAAa,OAAOjB,GACzBM,IACF,OAAOA,IAERd,EAAgB,SAACK,EAAOqB,GACvB,GAAAhB,GAAAiB,EAAAhB,EAAAiB,CAEA,KAFAvB,EAASA,EAAOgB,MAAM,KACtBO,GAAS,EACTlB,EAAA,EAAAC,EAAAN,EAAAa,OAAAP,EAAAD,EAAAA,IACC,GCkBKiB,EAAMtB,EAAOK,GDlBfiB,EAAIE,OAAOX,OAEb,GADAS,EAAMA,EAAIE,OAAOC,cACN,QAARH,GAAc,SAAdA,GAAqB,UAArBA,GACF,IAAID,EAAMC,EAAI,OACb,OAAO,MAER,IAAGD,EAAMK,UAAWJ,EAAIK,cAAcC,WAAW,GAChD,OAAO,CACX,OAAOL,IAERZ,SAASkB,UAAY,SAACC,GACrB,MAAGnC,GAAcF,EAAQO,OAAO8B,GAC/BhC,EAAUL,EAAQM,QADnB,WC8BCE,KAAK8B","file":"stylesheet_reloader.js","sourcesContent":["###\r\n\tStyleSheetReloader v 0.5\r\n\tAuthor: Vlad Tokarev <vlad@tokarev.tk>\r\n###\r\nwindow.StyleSheetReloader = (options)->\r\n\tdefaultOptions = {\r\n\t\tcssUrl: false\r\n\t\t,hotKey: 'alt+r'\r\n\t}\r\n\tif typeof options is 'string'\r\n\t\toptions = {\r\n\t\t\tcssUrl:options\r\n\t\t}\r\n\tif typeof options != 'object'\r\n\t\toptions = {}\r\n\tfor own optionKey,optionDefaultValue of defaultOptions\r\n\t\tif !options[optionKey]\r\n\t\t\toptions[optionKey] = defaultOptions[optionKey]\r\n\t# Changes links href with replacedVersion get parameter\r\n\trunChange = (cssUrl)->\r\n\t\treplacedLinks = 0\r\n\t\tlinks = document.querySelectorAll('link[rel=stylesheet][href]')\r\n\t\tfor link in links\r\n\t\t\thref = link.getAttribute('href')\r\n\t\t\tif href && href.length && (!cssUrl || href.indexOf(cssUrl)!=-1)\r\n\t\t\t\thref = href.split('replacedVersion')[0]\r\n\t\t\t\threfLastChar = href.substr(href.length-1)\r\n\t\t\t\tif hrefLastChar=='?' || hrefLastChar=='&'\r\n\t\t\t\t\thref = href.substr(0,href.length-1)\r\n\t\t\t\treplacedVersion = Date.now()\r\n\t\t\t\taddParameter = '?'\r\n\t\t\t\tif href.indexOf('?')!=-1\r\n\t\t\t\t\taddParameter = '&'\r\n\t\t\t\thref+= addParameter + 'replacedVersion=' + replacedVersion;\r\n\t\t\t\tlink.setAttribute('href',href)\r\n\t\t\t\treplacedLinks++\r\n\t\treturn replacedLinks\r\n\t# Detects if HotKey is pressed\r\n\thotKeyPressed = (hotKey,event)->\r\n\t\thotKey = hotKey.split('+')\r\n\t\tresult = true\r\n\t\tfor key in hotKey\r\n\t\t\tif key.trim().length\r\n\t\t\t\tkey = key.trim().toLowerCase()\r\n\t\t\t\tif key in ['alt','ctrl','shift']\r\n\t\t\t\t\tif !event[key+'Key']\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\telse\r\n\t\t\t\t\tif event.keyCode != key.toUpperCase().charCodeAt(0)\r\n\t\t\t\t\t\treturn false\r\n\t\treturn result\r\n\t# Listening key pressed event\r\n\tdocument.onkeydown = (e)->\r\n\t\tif hotKeyPressed(options.hotKey,e)\r\n\t\t\trunChange(options.cssUrl)",null],"sourceRoot":"/source/"}